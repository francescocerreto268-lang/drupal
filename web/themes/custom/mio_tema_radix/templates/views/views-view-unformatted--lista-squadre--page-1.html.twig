{#
/**
* @file
* Theme override to display a view of unformatted rows.
*
* Available variables:
* - title: The title of this group of rows. May be empty.
* - rows: A list of the view's row items.
* - attributes: The row's HTML attributes.
* - content: The row's content.
* - view: The view object.
* - default_row_class: A flag indicating whether default classes should be
* used on rows.
*
* @see template_preprocess_views_view_unformatted()
*/
#}
{#
/**
* @file
* Implements a template to display a view of unformatted rows.
*
* Available variables:
* - title: The title of this group of rows. Can be empty.
* - rows: An array of the view's row items. Each row contains:
* - attributes: The HTML attributes for the row.
* - content: The actual content of the row.
* - view: The view object.
* - default_row_class: A boolean indicating whether default row classes should be used.
* - row_utility_classes: An array of optional utility classes to be used.
*
* @see template_preprocess_views_view_unformatted()
*/
#}
{% block views_unformatted_title %}
  {% if title %}
    <div class="container my-5">
      <h1 class="fw-bold mb-4 text-center">{{ title }}</h1>
    </div>
  {% endif %}
{% endblock %}

{% block views_unformatted_rows %}
  <div class="container my-4">
    <div class="row g-4 justify-content-center">
      {% for row in rows %}
        {% set _entity = row.content['#row']._entity %}
        <div class="col-12 col-sm-6 col-md-4 col-lg-3">
          <div class="card shadow-sm border-0 h-100 hover-card">
            
            {% if _entity.field_image.target_id %}
              {% set file = drupal_entity('file', _entity.field_image.target_id) %}
              <img 
                src="{{ file_url(file['#file'].uri.value) }}" 
                alt="{{ _entity.field_image.value[0].alt ?? _entity.title.value }}" 
                class="card-img-top img-fluid rounded-top"
              >
            {% else %}
              <div class="bg-light text-center py-5 text-muted">Nessuna immagine</div>
            {% endif %}
            
            <div class="card-body">
              <h5 class="card-title text-primary fw-bold mb-2">
                {{ _entity.field_nome.value }}
              </h5>
              
              {% if _entity.field_stadio.value %}
                <p class="card-text mb-2">
                  üèüÔ∏è <strong>Stadio:</strong> {{ _entity.field_stadio.value }}
                </p>
              {% endif %}
              
              {% if _entity.field_rosa.value[0].uri %}
                <p class="mb-1">
                  üìÑ <a href="{{ _entity.field_rosa.value[0].uri }}" target="_blank" class="link-primary text-decoration-none">
                    Rosa giocatori
                  </a>
                </p>
              {% endif %}
              
              {% if _entity.field_statistiche.value[0].uri %}
                <p class="mb-0">
                  üìä <a href="{{ _entity.field_statistiche.value[0].uri }}" target="_blank" class="link-secondary text-decoration-none">
                    Statistiche squadra
                  </a>
                </p>
              {% endif %}
              {% if _entity.field_inno.target_id %}
                {% set media = drupal_entity('media', _entity.field_inno.target_id) %}
                 {{ media|render }}
              {% endif %}


            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
{% endblock %}
